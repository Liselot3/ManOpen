//
//  ManDocumentControllerTests.m
//  ManOpenTests
//
//  Created by Don McCaughey on 2/10/18.
//

#import <XCTest/XCTest.h>
#import "ManDocumentController.h"


@interface ManDocumentControllerTests : XCTestCase

@property (retain) ManDocumentController *controller;

@end


@implementation ManDocumentControllerTests

#pragma mark - GetWordArray

- (void)testGetWordArray
{
    NSArray<NSString *> *expected = @[];
    XCTAssertEqualObjects(expected, GetWordArray(@""));
    
    expected = @[ @"grep" ];
    XCTAssertEqualObjects(expected, GetWordArray(@"grep"));
    
    expected = @[ @"grep" ];
    XCTAssertEqualObjects(expected, GetWordArray(@"\tgrep\n"));

    expected = @[ @"grep(1)" ];
    XCTAssertEqualObjects(expected, GetWordArray(@"grep(1)"));
    
    expected = @[ @"grep", @"find" ];
    XCTAssertEqualObjects(expected, GetWordArray(@"grep find"));
    
    expected = @[ @"grep", @"find", @"open(2)" ];
    XCTAssertEqualObjects(expected, GetWordArray(@"grep find open(2)"));
    
    expected = @[ @"grep(1)", @"find", @"open(2)", @"printf(3)" ];
    XCTAssertEqualObjects(expected, GetWordArray(@" grep(1)\r\nfind\t open(2)\n  printf(3)\r\n"));
}

#pragma mark - manCommandWithManPath

- (void)testManCommandWithManPath
{
    XCTAssertEqualObjects(@"/usr/bin/man",
                          [_controller manCommandWithManPath:nil]);
    XCTAssertEqualObjects(@"/usr/bin/man",
                          [_controller manCommandWithManPath:@""]);
    XCTAssertEqualObjects(@"/usr/bin/man -M '/usr/man'",
                          [_controller manCommandWithManPath:@"/usr/man"]);
    XCTAssertEqualObjects(@"/usr/bin/man -M '/usr/man:/it'\\''s great'",
                          [_controller manCommandWithManPath:@"/usr/man:/it's great"]);
}

#pragma mark - setUp

- (void)setUp
{
    [super setUp];
    _controller = [[ManDocumentController sharedDocumentController] retain];
}

- (void)tearDown
{
    [super tearDown];
    [_controller release];
}

@end
