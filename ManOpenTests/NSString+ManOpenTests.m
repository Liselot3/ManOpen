//
//  NSString+ManOpenTests.m
//  ManOpenTests
//
//  Created by Don McCaughey on 2/10/18.
//

#import <XCTest/XCTest.h>
#import "NSString+ManOpen.h"


@interface NSString_ManOpenTests : XCTestCase
@end


@implementation NSString_ManOpenTests

- (void)testSingleQuotedShellWord
{
    XCTAssertEqualObjects(@"''", @"".singleQuotedShellWord);
    XCTAssertEqualObjects(@"''\\'''", @"'".singleQuotedShellWord);
    XCTAssertEqualObjects(@"'/foo/bar'", @"/foo/bar".singleQuotedShellWord);
    XCTAssertEqualObjects(@"'/foo bar/baz'", @"/foo bar/baz".singleQuotedShellWord);
    XCTAssertEqualObjects(@"'/Apple'\\''s Stuff'", @"/Apple's Stuff".singleQuotedShellWord);
    XCTAssertEqualObjects(@"'/foo/'\\''bar'\\'''", @"/foo/'bar'".singleQuotedShellWord);
    XCTAssertEqualObjects(@"''\\''foo'\\''/bar'", @"'foo'/bar".singleQuotedShellWord);
}

- (void)testSingleQuotedShellWordWithSurroundingQuotes
{
    XCTAssertEqualObjects(@"", [@"" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"''", [@"" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"'\\''", [@"'" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"''\\'''", [@"'" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"/foo/bar", [@"/foo/bar" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"'/foo/bar'", [@"/foo/bar" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"/foo bar/baz", [@"/foo bar/baz" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"'/foo bar/baz'", [@"/foo bar/baz" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"/Apple'\\''s Stuff", [@"/Apple's Stuff" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"'/Apple'\\''s Stuff'", [@"/Apple's Stuff" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"/foo/'\\''bar'\\''", [@"/foo/'bar'" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"'/foo/'\\''bar'\\'''", [@"/foo/'bar'" singleQuotedShellWordWithSurroundingQuotes:YES]);
    
    XCTAssertEqualObjects(@"'\\''foo'\\''/bar", [@"'foo'/bar" singleQuotedShellWordWithSurroundingQuotes:NO]);
    XCTAssertEqualObjects(@"''\\''foo'\\''/bar'", [@"'foo'/bar" singleQuotedShellWordWithSurroundingQuotes:YES]);
}

@end
